<div class="prose">
  <h1>工数一覧</h1>
  <p>
    <%= link_to '新規工数', new_time_entry_path, class: 'btn' %>
    <%= link_to 'プロジェクト', projects_path, class: 'btn' %>
  </p>

  <%= render 'filters' %>

  <table>
    <thead>
      <tr>
        <th>日付</th>
        <th>プロジェクト</th>
        <th>タスク</th>
        <th>時間(h)</th>
        <th>メモ</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% total = 0 %>
      <% @time_entries.each do |e| %>
        <% total += e.hours %>
        <tr>
          <td><%= e.work_date %></td>
          <td><%= e.project&.name %></td>
          <td><%= e.task&.name %></td>
          <td><%= e.hours %></td>
          <td><%= e.note %></td>
          <td>
            <%= link_to '表示', e %>
            <%= link_to '編集', edit_time_entry_path(e) %>
            <%= link_to '削除', e, method: :delete, data: { confirm: '削除しますか?' } %>
          </td>
        </tr>
      <% end %>
    </tbody>
    <tfoot>
      <tr>
        <th colspan="3">合計</th>
        <th><%= total %> h</th>
        <th colspan="2"></th>
      </tr>
    </tfoot>
  </table>
</div>
